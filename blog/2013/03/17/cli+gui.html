<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<title>当纯文本命令行碰到图形界面</title>
<meta  http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta  name="generator" content="Org-mode" />
<meta  name="author" content="Bao Haojun" />
<link rel="stylesheet" href="/css/default.css" type="text/css" />
 <link rel="shortcut icon" href="/poison.png" type="image/png" />

    <script type="text/javascript" src="/js/jquery-1.7.1.min.js"></script>
    <script type="text/javascript">
        var BYB = {};
    </script>
    <script type="text/javascript">
        BYB.includeScript = function(file,callback){
            var _doc = document.getElementsByTagName('head')[0];
            var js = document.createElement('script');
            js.setAttribute('type', 'text/javascript');
            js.setAttribute('src', file);
            _doc.appendChild(js);

            if (!/*@cc_on!@*/0) { //if not IE
                //Firefox2、Firefox3、Safari3.1+、Opera9.6+ support js.onload
                js.onload = function () {
                    callback();
                }
            } else {
                //IE6、IE7 support js.onreadystatechange
                js.onreadystatechange = function () {
                    if (js.readyState == 'loaded' || js.readyState == 'complete') {
                        callback();
                    }
                }
            }
            return false;
        }
    </script>
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2013 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
</head>
<body>
<div id="preamble" class="status">
<div id="header">

  <h1 id="blog-title">

    包昊军的博客

  </h1>
  <p id="description">What you don't know, won't hurt you.</p>

</div>
</div>
<div id='bhj_article'>
  <div id='bhj_leftpane'>
<div id="content">
<h1 class="title">当纯文本命令行碰到图形界面</h1>
<p>
很多人对很多事都会表现得很狂热。比如我自己，曾经一度说过这样的话：“我最
爱的是自由软件，最讨厌的是微软公司”。过了几年，有一次我把自己搞失业了，
居然去找在微软工作的同学说，嘿，哥们，能不能帮我推荐一下xxxx号职位？
</p>

<p>
这不是打自己脸么？
</p>

<p>
从那之后，我再也不敢轻易地说那种不知深浅的话了。其实微软的东西挺好的。
</p>

<p>
回到这篇文章的题目，命令行和图形界面。这两种界面特点非常鲜明，可以说水
火不相容。
</p>

<p>
命令行的优点是高效率。几乎可以完全用键盘操作；魔鬼筋肉人可以最大程度地
利用手指肌肉的机械化记忆而达到非常快的速度；头脑发达的可以组合使用各种
命令行工具达到自己的目的；最后非常容易自动化。
</p>

<p>
图形界面的优点则是直观。不是有句话叫一图抵千言么。一千个字写得累看得也
累；画一张图可能画得有趣看得也轻松。
</p>

<p>
而它们的缺点则刚好正是对方的优点。命令行用久了容易累，纯文本的东西需要
吸收消化，对脑子转速要求比较高；图形界面用久也容易累，因为它比较难自动
化，很多操作需要用鼠标完成。
</p>

<p>
由此带来的一个现象是，爱用纯文本界面的人，对图形界面常嗤之以鼻，认为那
是给脑子不够用的人使的；爱用图形界面的人，往往不知道还有命令行这回事。
</p>

<p>
其实就像男人和女人，往往只有当他们相遇一起的时候，才会产生更美好的东西：
爱情。
</p>

<p>
下面简单介绍几个我用过（写过）的结合命令行和图形界面的小程序。
</p>

<div id="outline-container-sec-1" class="outline-2">
<h2 id="sec-1"><span class="section-number-2">1</span> 抛绣球（of/oc）</h2>
<div class="outline-text-2" id="text-1">
<p>
<code>of</code> 这个命令是open file的意思，通过这个命令我可以在命令行上打开某个文
件，在Windows上cmd.exe下有个start命令有相同的功能，Cygwin里模访了一下，
有一个cygstart程序。注意，start在cmd.exe里是一个内置的命令，你在文件系
统上找不到一个对应的start.exe或start.com（能找到的话也是跟这个命令风马
牛不相及的）；而cygstart则是一个独立的.exe程序文件。在Linux下的话就更
多了，好像有一个叫xdg-open，也有叫gnome-open的等等。在Mac下则有一个
/usr/bin/open命令。
</p>

<p>
通过这个 <code>of</code> 命令的话，我就不需要从文件管理器的（我的电脑）文件夹开始
一层一层找到我的文件所在的目录，再找到我想要到文件（有时万一这个目录下
有成百上千几万个文件的话，作为一个男人，我会很不争气的有一种想哭的感觉）
然后双击打开它。
</p>

<p>
然后这个 <code>oc</code> 的话就是open containing folder的意思。在Firefox下如果你
下载了一个文件你可以右键点击这个下载的文件，这时会弹出菜单，里面有一个
菜单项叫做“打开所在的文件夹”，点了之后会打开这个新下载的文件所在的文件
夹，注意！一打开之后默认就会选中这个文件。
</p>

<p>
我现在这个 <code>oc</code> 命令用的比较少了。但是 <code>of</code> 还是很有用的，通过它我不需
要去记比如一个网页是什么用firefox打开，一个pdf文件的是用acrobat打开，
那么这样子的话我就不需要记那么多的文件和相应的命令之间的对应关系，所以
觉得这个命令是非常有用的，至少在命令行上的使用效率相当的高。
</p>

<p>
这两个命令就像是男女之间抛绣球一样，哎我扔个球出来你接着，我扔个文件出
来你给我打开😄
</p>
</div>
</div>

<div id="outline-container-sec-2" class="outline-2">
<h2 id="sec-2"><span class="section-number-2">2</span> 小姐，能不能给我你的电话号码（up/swp）</h2>
<div class="outline-text-2" id="text-2">
<p>
关于这个 <code>up</code> 就是Unix Path的意思，在命令行上我打一个 <code>up</code> 后面跟一个
比方说当前文件夹下面某个文件的名字（注意！是有补齐和通配符的哦，很方便
耶），它就能帮我把这个文件的全路径放到剪贴板里去。关于这个 <code>swp</code> 则是
samba windows path 的意思，在Linux下我通过smbnetfs加载了Windows的一个
共享目录，然后我用swp了就可以获得其下某个文件的Windows共享目录格式的路
径，放到剪贴板里，然后我可以通过邮件粘贴这个路径去跟同事们分享。或者我
在Firefox里发个微博要上传图片时，我直接粘贴一下路径就可以了，不用一层
一层去找。
</p>

<p>
反过来在Windows或者Linux的文件管理器里，通过修过系统注册表（Windows）
之类的办法，我可以点一个文件然后右键菜单中增加一个比方说叫 <code>up</code> 的菜单
项，点一下就把这个文件的全路径放到剪贴板里，然后我可以很方便地把这个路
径粘贴到我的命令行窗口上，打开这个文件、或者可以很容易的改变我的目录cd
到那个文件的目录下、或者用一些别的命令来处理这个文件、我还可以把它粘贴
到我的邮件里去。这个用过UltraEdit的同学可能会有点印象，文件管理器里会
多出一个“用UltraEdit打开”的右键菜单项。
</p>

<p>
这些命令是不是就像男女之间互相写情书？
</p>
</div>

<div id="outline-container-sec-2-1" class="outline-3">
<h3 id="sec-2-1"><span class="section-number-3">2.1</span> 剪贴板的更多用途</h3>
<div class="outline-text-3" id="text-2-1">
<p>
剪贴板真的是一个很好的媒婆一样的角色，为命令行和图形界面起到一个穿针引
线的作用。你在命令行上操作剪贴板在不管那个平台下都是有办法的，在
Windows下你可以通过安装Cygwin获得一对叫putclip/getclip的程序。然后在那
个Linux下的话有一个叫xclip的程序，在Mac下则有一对pbcopy/pbpaste程序。
我在bash底下定义了一个快捷键可以把当前输入的这一行文本直接放到剪贴板里
去，这样的话我跟同事共享一下我的小命令是非常有用的可以直接粘贴到我的邮
件里去发送。在 <a href="../../../2014/06/23/0-sending-weixin-weibo-etc-with-emacs-and-smartisa-t1.html">这篇博客</a> 里我也提到了我对putclip/getclip的一些跟Emacs有
关的改动。
</p>
</div>
</div>
</div>

<div id="outline-container-sec-3" class="outline-2">
<h2 id="sec-3"><span class="section-number-2">3</span> 不爱了，把它们全干掉吧！</h2>
<div class="outline-text-2" id="text-3">
<p>
一般我们比方说图形界面的程序出了一点问题什么的情况下我们可能会想要那个，
重头来过，reboot或者logout。一般Linux下只要logout就可以了，但logout的
操作你需要用鼠标去点，另外的话你可能还需要去等待所有程序被关闭。所以我
自己的话在命令行上直接退出图形界面的方法是非常简单粗暴的，将所有属于我
自己的进程全部kill掉😄 。
</p>

<p>
这个命令是这样的：
</p>

<div class="org-src-container">

<pre class="src src-sh">sudo setsid bash -c <span class="org-string">'ps -eo user,pid|grep bhj|pn 2|xargs kill'</span>&amp;
</pre>
</div>

<p>
这里面sudo是为了让这个脚本本身跑到root用户底下去，不是为了要得到root权
限才能kill——都是我自己的权限，都可以kill的——而是为了不要误伤到自己这个
终结者进程：终结者，去，把所有bhj的进程都干掉。OK，终结者自己也是bhj的
进程，先把自己给干掉的话就太二了。
</p>

<p>
Setsid也是差不多的意思，只用sudo是不够的，因为终结者的父进程被干掉的话
在终端上它们属于一个session的，终结者本身也是要一起毁灭的。
</p>

<p>
最后有一个 <code>&amp;</code> 字符，你可以猜猜是什么目的？猜到的话我可以请你喝咖啡😊。
注意，我要的答案不是“为了把这个程序放到后台”，这不是我的目的。
</p>
<nav>
  <ul id="prev_next_posts">
    <li class="prev_post">
      <a href="../14/dvp-keyboard-mac.html"> <!-- prev-url -->
        <i class="icon-chevron-left">《</i>
        在Mac系统下使用dvp (Dvorak Programmer) <!-- prev-title -->
      </a>
    </li>
    <li class="next_post" style="text-align: right;">
      <a href="../31/when-java-meet-csharp.html"> <!-- next-url -->
        当Java遇到C# <!-- next-title -->
        <i class="icon-chevron-right">》</i>
      </a>
    </li>
  </ul>
</nav>
</div>
</div>
</div>
<!-- {%html-mode%} -->

<div id="disqus_container">
  <script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: THIS CODE IS ONLY AN EXAMPLE * * */
    var disqus_shortname = 'baohaojun'; // Required - Replace example with your forum shortname
    var disqus_url = 'http://baohaojun.github.io/blog/2013/03/17/cli+gui.html';

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
    <div style="margin-bottom:20px">
    <script type="text/javascript" charset="utf-8">
      (function(){
      var _w = 86 , _h = 16;
      var param = {
      url:location.href,
      type:'6',
      count:'', /**是否显示分享数，1显示(可选)*/
      appkey:'', /**您申请的应用appkey,显示分享来源(可选)*/
      title:'', /**分享的文字内容(可选，默认为所在页面的title)*/
      pic:'', /**分享图片的路径(可选)*/
      ralateUid:'1611427581', /**关联用户的UID，分享微博会@该用户(可选)*/
      language:'zh_cn', /**设置语言，zh_cn|zh_tw(可选)*/
      rnd:new Date().valueOf()
      }
      var temp = [];
      for( var p in param ){
      temp.push(p + '=' + encodeURIComponent( param[p] || '' ) )
      }
      document.write('<iframe allowTransparency="true" frameborder="0" scrolling="no" src="http://hits.sinajs.cn/A1/weiboshare.html?' + temp.join('&') + '" width="'+ _w+'" height="'+_h+'"></iframe>')
      })()
    </script>
  </div>
  <div id="disqus_thread"></div>
</div>

</div> <!-- bhj_leftpane -->
<div id="sidebar"><div id="sidebar2">


  <!-- Begin #profile-container -->

   <div id="profile-container"><h2 class="sidebar-title">About Me</h2>
<dl class="profile-datablock"><dt class="profile-img"><a href="/images/bhj.png""><img src="/images/bhj-thumb.png" alt="My Photo" height="58" width="80"></a></dt>
<dd class="profile-data"><strong>Name:</strong> <a rel="author" href="https://www.github.com/baohaojun"> Bao Haojun </a></dd>
<dd class="profile-data"><strong>Location:</strong>  Beijing, China </dd></dl>

<p class="profile-link"><a rel="author" href="/blog/2011/12/23/index.html">View my complete profile</a></p></div>

  <!-- End #profile -->



  <h2 class="sidebar-title">Feeds</h2>
    <ul>
        <li><a href="/atom.xml">Atom</a></li>
    </ul>

  <h2 class="sidebar-title">Projects</h2>
    <dl>
        <dt><a href="/blog/2011/12/23/beagrep.html"> Beagrep </a></dt>
        <dd> Grep 2G source code in 0.23 second </dd>

        <dt><a href="/blog/2013/04/13/skeleton-complete.html"> Skeletom-complete.el </a></dt>
        <dd> Type a bare skeleton, complete to a symbol/partial line/sexp/paragraph </dd>

        <dt><a href="/blog/2011/12/28/org-jira.html"> Org-jira.el </a></dt>
        <dd> Use JIRA with org-mode </dd>
    </dl>

    <h2>Tags</h2>
    <ul>
                <li><a href="../../../../meta/tags/gui.html" title="Graphical User Interface">gui</a></li>
        <li><a href="../../../../meta/tags/cli.html" title="Command Line">cli</a></li>
    </ul>

  <h2 class="sidebar-title">Previous Posts</h2>
    <ul id="recently">
        <li><a href='../14/dvp-keyboard-mac.html'> 在Mac系统下使用dvp (Dvorak Programmer) </a></li>
<li><a href='../11/crossdict-gcide.html'> How to extract GCIDE dictionary data for CrossDict </a></li>
<li><a href='../11/crossdict-gcide-help.html'> Installing Dictionary Data Separately </a></li>
<li><a href='../09/bhj-do-codegen.html'> 给任意语言插上宏定义的翅膀 </a></li>
<li><a href='../08/crossdict-readme-cn.html'> CrossDict: 交叉索引字典 </a></li>
<li><a href='../02/the-ulti-dict.html'> 又一个字典软件，我的！ </a></li>
<li><a href='../02/donate.html'> Donate for my free software effort </a></li>
<li><a href='../../02/25/index-cn.html'> 我在Github上的个人博客 </a></li>
<li><a href='../../02/12/wasted.html'> wasted </a></li>
<li><a href='../../02/12/note.html'> note </a></li>
    </ul>

    <h2 class="sidebar-title">Archive</h2>
      <ul id="archives">
        <li><a href="/meta/Archive.html"> The complete archive </a></li>
      </ul>

  <!--
  <p>This is a paragraph of text that could go in the sidebar.</p>
  -->



</div></div>
<!-- End #sidebar -->
</div> <!-- End #bhj_article -->
<!-- {%/html-mode%} -->
<div id="postamble" class="status">
<!-- {%html-mode%} -->

<!-- {%/html-mode%} -->
</div>
</body>
</html>
