#!/bin/bash
function apt-get()
{
    if test "$1" = source; then
        command apt-get "$@";
    else
        sudo apt-get "$@"
    fi
}
    
alias aptitude='ssh -t root@localhost aptitude'
export LC_ALL=en_US.UTF-8
export LANG=en_US.UTF-8

PATH=/usr/local/jdk1.5/bin:/usr/local/arm-linux/bin:~/bin/linux/:~/bin/linux/ext:$PATH:
CLASSPATH=/usr/local/jdk1.5/lib:.
JAVA_HOME=/usr/local/jdk1.5
export PATH CLASSPATH JAVA_HOME

alias sudo='sudo env PATH=$PATH'
alias of=gnome-open

if test -z "$SSH_CLIENT"; then
    export LOCALIP=localhost
    export LOCALPORT=22
    export REMOTEIP=localhost
    export PS1HostName=`hostname`
    export PS1='\n( \u@$PS1HostName [01;32m| \w |[0m [01;34mRemote[01;31m:[01;34mTrue[0m)\n\$'

    function sudoedit()
    {
        if [[ $WHOAMI == root ]] && [[ -f "$1" ]]; then
            echo using root to do edit, won\'t check read permission
        else
            if ! [[ -r "$1" ]]; then
                echo Error: "$1" is not readable
                return 1
            fi
            if ! [[ -w "$1" ]]; then
                echo Warning: "$1" is not writable
            fi
        fi    

        local file=$( readlink -f "$1" )
        WHOAMI=root ~/bin/edit.pl "$file"
    }

alias edit=edit_1
function edit_1()
{
    local file=$1
    if test -e "$file"; then
        emacsclient -n "$file"
    else # external/opencore/android/mediascanner.cpp:622: error: invalid conversion from â€˜const char*â€™ to â€˜char*â€™

        [[ "$file" =~ :$ ]] && file=${file:0:${#file}-1}
        local line=${file##*:}
        file=${file%:*}
        emacsclient -n +"${line:-1}" "$file"
    fi
}

fi
